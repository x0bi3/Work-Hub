<!DOCTYPE html>
<html>
<head>
    <title>Test Token</title>
</head>
<body>
    <h1>Token Test</h1>
    <button onclick="testToken()">Test Token</button>
    <pre id="result"></pre>
    
    <script>
        const PUBLIC_FORM_TOKEN = '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';
        const GITHUB_REPO = 'x0bi3/Work-Hub';
        
        async function testToken() {
            const resultEl = document.getElementById('result');
            resultEl.textContent = 'Testing...\n';
            
            try {
                console.log('Token:', PUBLIC_FORM_TOKEN ? 'Set' : 'Not set');
                console.log('Token length:', PUBLIC_FORM_TOKEN.length);
                console.log('Token preview:', PUBLIC_FORM_TOKEN.substring(0, 10) + '...');
                
                const response = await fetch(`https://api.github.com/repos/${GITHUB_REPO}/issues`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                        'Authorization': `token ${PUBLIC_FORM_TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: 'Test Issue from Token',
                        body: 'This is a test to verify the token works.',
                        labels: ['newsletter-subscription']
                    })
                });
                
                const text = await response.text();
                resultEl.textContent = `Status: ${response.status}\n\nResponse:\n${text}`;
                
                if (response.ok) {
                    const data = JSON.parse(text);
                    resultEl.textContent += `\n\n✅ Success! Issue #${data.number} created!`;
                } else {
                    resultEl.textContent += `\n\n❌ Failed! Check the error above.`;
                }
            } catch (error) {
                resultEl.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
